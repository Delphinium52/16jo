<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>My Homepage</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <style>
      .hpg {
        font-size: 50px;
        text-align: center;
        margin-top: 50px;
      }
      .fk {
        text-align: center;
        padding-bottom: 5px;
        margin-top: 100px;
      }
      .wiw {
        font-size: 30px;
        color: rgb(69, 69, 69);
      }
      .table {
        text-align: center;
        margin: 10px auto;
        max-width: 80%;
        border-top-left-radius: 15px; border-top-right-radius: 15px;
        	border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;
        
      }
      .table thread th,
      .table tbody th{
        padding: 10px;
      }

      .hrOnply {
        margin-top: 0px;
      }
      .ply {
        font-size: 30px;
        padding-bottom: 5px;
        margin-top: 100px;
        justify-content: center;
        display: flex;
        text-align: center;
      }
      #playlist-container{
  display: flex;
  flex-wrap: wrap;
  justify-content: center; /* 중앙 정렬 유지 */
  align-items: center;
  gap: 20px;
  padding: 40px;
  margin: auto;
  border: 1px solid black;
  max-width: 80%;
  background-color: green;
}

          </style>
  </head>

  <body>
    <h1 class="hpg">My Homepage</h1>

    <div class="container-fluid">
      <div class="row justify-content-end">
        <div class="col-auto">
          <button type="button" class="btn btn-secondary btn-sm">
            HOME
            <!-- button에  onClick="어쩌구저쩌구.html' 추가해서 페이지이동하게 만들기  -->
          </button>
        </div>
      </div>
    </div>

    <hr />

    <div class="fk">
      <strong class="wiw">내가 쓴 글</strong>
    </div>

    <div>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">작성일</th>
            <th scope="col">제목</th>
            <th scope="col">추천수</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">1</th>
            <td>Mark</td>
            <td>Otto</td>
            <td>@mdo</td>
          </tr>
          <tr>
            <th scope="row">2</th>
            <td>Jacob</td>
            <td>Thornton</td>
            <td>@fat</td>
          </tr>
          <tr>
            <th scope="row">2</th>
            <td>Jacob</td>
            <td>Thornton</td>
            <td>@fat</td>
          </tr>
        </tbody>
      </table>
    </div>
    <hr class="hrOnply" />

    <div class="ply">
        <strong>나의 재생목록</strong>
        </div>
        <div id="playlist-container"></div> <!-- 여기에 재생목록이 표시될 것입니다 -->
      </div>
    
      <script>
        // YouTube API 키
        const apiKey = 'AIzaSyCKqQM5chZJ3XNfoaMEQMEGV7RgnHal-Oc';
        
        // 재생목록 ID
        const playlistId = 'PLaevONTEZPlhyOnFdn74HGrR7c8iJDZ58';
    
        // YouTube API 호출 URL     
        const apiUrl = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${playlistId}&key=${apiKey}`;

        // fetch를 사용하여 API 호출
        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                // 가져온 데이터를 처리하여 HTML 생성
                renderPlaylist(data.items);
            })
            .catch(error => console.error('Error fetching playlist:', error));
    
        // 재생목록을 렌더링하는 함수
        function renderPlaylist(playlistItems) {
            const playlistContainer = document.getElementById('playlist-container');
    
            // 각 재생목록 아이템을 순회하며 HTML 생성
            playlistItems.forEach(item => {
                const title = item.snippet.title;
                const thumbnail = item.snippet.thumbnails.medium.url;
                const videoCount = playlistItems.length;
   
                // HTML 생성
                const playlistItemHtml = `
                    <div class="playlist-item">
                        <img src="${thumbnail}" alt="${title}">
                        <h3>${title}</h3>
                        <p>${videoCount} videos</p>
                    </div>
                `;
                // 생성된 HTML을 재생목록 컨테이너에 추가
                playlistContainer.innerHTML += playlistItemHtml;
            });
        }
    </script>
    </body>
    </html>
  </body>
</html>
